{"version":3,"sources":["../../src/mixins/get-stack-trace.ts"],"names":[],"mappings":"0GAAA,wD;;;;;;AAMA;;;;;;;;AAQO,IAAI,aAAa,GAAG,UAAS,KAAK,GAAG,QAAjB,EAAuC;AAChE,MAAI;AACF,IAAA,iBADE;AAEF,IAAA,eAFE;AAGA,EAAA,KAHJ;;AAKA,MAAI,oBAAoB,GAAG,EAA3B;AACA,EAAA,KAAK,CAAC,eAAN,GAAwB,KAAK,GAAG,CAAhC;AACA,EAAA,KAAK,CAAC,iBAAN,GAA0B,UAAS,GAAT,EAAc,qBAAd,EAAqC;AAC7D,IAAA,oBAAoB,GAAG;AACrB,OAAG,qBADkB,CAAvB;;AAGA;AACA,IAAA,oBAAoB,CAAC,KAArB;;AAEA,QAAI,gBAAE,UAAF,CAAa,iBAAb,CAAJ,EAAqC;AACnC,aAAO,iBAAiB,CAAC,IAAlB,CAAuB,KAAvB,EAA8B,GAA9B,EAAmC,qBAAnC,CAAP;AACD;AACF,GAVD;AAWA;AACA,EAAA,KAAK,GAAG,KAAR;AACA,EAAA,KAAK,CAAC,eAAN,GAAwB,eAAxB;AACA,EAAA,KAAK,CAAC,iBAAN,GAA0B,iBAA1B;;AAEA,SAAO,oBAAP;AACD,CAzBM,C","file":"get-stack-trace.js","sourcesContent":["import _ from 'lodash';\n\nimport {\n  CallSite\n} from '../types';\n\n/**\n * Part of `lodash-firecloud`.\n *\n * Gets the current stacktrace.\n *\n * @param level The maximum stacktrace length.\n * @returns Returns a structured stacktrace, that is a list of CallSite objects.\n */\nexport let getStackTrace = function(level = Infinity): CallSite[] {\n  let {\n    prepareStackTrace,\n    stackTraceLimit\n  } = Error;\n\n  let structuredStackTrace = [] as NodeJS.CallSite[];\n  Error.stackTraceLimit = level + 1;\n  Error.prepareStackTrace = function(err, structuredStackTrace2) {\n    structuredStackTrace = [\n      ...structuredStackTrace2\n    ];\n    // ignore ourselves\n    structuredStackTrace.shift();\n\n    if (_.isFunction(prepareStackTrace)) {\n      return prepareStackTrace.call(Error, err, structuredStackTrace2);\n    }\n  };\n  // eslint-disable-next-line babel/no-unused-expressions\n  Error().stack;\n  Error.stackTraceLimit = stackTraceLimit;\n  Error.prepareStackTrace = prepareStackTrace;\n\n  return structuredStackTrace;\n};\n"]}